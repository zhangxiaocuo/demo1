"use strict";function a(){var e=document.querySelector(".top>.w>.a"),n=document.querySelector(".top .a h3"),t=document.querySelector(".top .a ul");e.addEventListener("mouseenter",function(){t.style.display="block",n.style.borderColor="#cccccc",n.style.borderBottom="solid #ffffff 1px",e.style.background="#ffffff"}),e.addEventListener("mouseleave",function(){t.style.display="none",n.style.borderColor="#e3e4e5",n.style.borderBottom="none",e.style.background=""}),t.addEventListener("click",function(e){e=e.target;"LI"===e.tagName&&(n.innerHTML=e.innerHTML,localStorage.setItem("city",e.innerHTML))}),localStorage.getItem("city")&&(n.innerHTML=localStorage.getItem("city"))}function a1(){var e=document.querySelector(".top .b .wdxx"),n=document.querySelector(".top .b .wdxx .lixx");e.addEventListener("mouseenter",function(){n.style.display="block"}),e.addEventListener("mouseleave",function(){n.style.display="none"})}function a3(){var e=document.querySelector("header>.w>.time"),n=new Date,t=n.getFullYear(),c=n.getMonth()+1,o=n.getDate(),n=n.getDay(),c=c<10?"0"+c:c,o=o<10?"0"+o:o;e.innerHTML="<span>\n  ".concat(t,"年").concat(c,"月").concat(o,"日 ").concat(["星期日","星期一","星期二","星期三","星期四","星期五","星期六"][n],"\n  </span>")}function a4(){var n=document.querySelector("header .ipt input"),o=document.querySelector("header .ipt ul"),e=document.querySelector("header .ipt>button");n.addEventListener("focus",function(){var t,c;o.style.display="block",localStorage.getItem("ss")?((t=localStorage.getItem("ss").split(",")).forEach(function(e,n){""===e&&t.splice(n,n)}),5<=t.length&&t.splice(5),c="",t.forEach(function(e,n){c+=" <li>\n        <b>".concat(e,"</b> <i>删除</i>\n      </li>")}),o.children[1].innerHTML=c,localStorage.setItem("ss",t)):o.children[1].innerHTML="<p>您没有浏览记录, 或已清空</p>"}),n.addEventListener("blur",function(){var e=[];if(!n.value)return!1;e.push(n.value);e=e.concat(localStorage.getItem("ss"));localStorage.setItem("ss",e),n.value=""}),n.addEventListener("keyup",function(e){13==e.keyCode&&(n.blur(),o.style.display="none")}),o.addEventListener("click",function(e){var t=e.target;if("删除"===t.innerHTML){o.children[1].removeChild(t.parentNode);var c=localStorage.getItem("ss").split(",");if(c.forEach(function(e,n){e===t.previousElementSibling.innerHTML&&(0===n&&c.shift(),c.splice(n,n))}),0===c.length)return o.children[1].innerHTML="<p>您没有浏览记录, 或已清空</p>",localStorage.removeItem("ss"),!1;localStorage.setItem("ss",c)}"清空记录"===t.innerHTML&&(localStorage.removeItem("ss"),o.style.display="none")}),o.addEventListener("mouseleave",function(){o.style.display="none"}),e.addEventListener("click",function(){o.style.display="none"})}function a6(){var n=document.querySelector(".cc"),t=document.documentElement;document.addEventListener("scroll",function(e){500<=window.pageYOffset&&(n.style.display="block"),window.pageYOffset<500&&(n.style.display="none")}),n.addEventListener("click",function(e){"顶部"===e.target.innerHTML&&animate(t,{scrollTop:0})})}function a9(){var e=document.querySelector(".top .w .b .li1");localStorage.getItem("zh")&&(e.innerHTML='<a href="javascript:;" style="color: #e1251b;">\n    '.concat(localStorage.getItem("zh"),"\n    </a>"))}function a10(){document.querySelector(".top .w .b .wdxx .lixx .s7").addEventListener("click",function(){localStorage.removeItem("zh"),location.reload()})}function d1(){var t=document.querySelector(".main .cz .sp1"),c=document.querySelector(".main .cz input"),o=document.querySelector(".main .cz .sp2"),l=document.querySelector(".main .cz .sp3"),i=document.querySelector(".main .cz .sp4"),r=document.querySelector(".main .cz .sp5"),e=document.querySelector(".main .cz"),n=document.querySelector(".main .box"),a=null;t.addEventListener("click",function(){a=document.querySelectorAll(".main .box li input"),c.style.display="block",o.style.display="block",l.style.display="block",i.style.display="block",r.style.display="block";for(var e=0,n=a.length;e<n;e++)a[e].style.display="block";t.style.background="#cccccc"}),l.addEventListener("click",function(){a=document.querySelectorAll(".main .box li input"),c.style.display="none",o.style.display="none",l.style.display="none",i.style.display="none",r.style.display="none";for(var e=0,n=a.length;e<n;e++)a[e].style.display="none";t.style.background="#008c8c"}),e.addEventListener("click",function(e){e=e.target;if("sp2"===e.className||"INPUT"===e.tagName){a=document.querySelectorAll(".main .box li input"),"sp2"===e.className&&(c.checked?c.checked=!1:c.checked=!0);for(var n=0,t=a.length;n<t;n++)a[n].checked=c.checked}}),n.addEventListener("click",function(e){e=e.target;if(a=document.querySelectorAll(".main .box li input"),"INPUT"===e.tagName)if(e.checked){for(var n=0,t=a.length;n<t;n++)if(!a[n].checked)return!1;c.checked=e.checked}else c.checked=!1})}function d2(){document.querySelectorAll(".main .box .sp2 .btn1"),document.querySelectorAll(".main .box .sp2 .btn2"),document.querySelectorAll(".main .box .sp2 i");document.querySelector(".main .box ul").addEventListener("click",function(e){e=e.target;if("+"===e.innerHTML){var n=e.previousElementSibling.previousElementSibling;if(!(1<=parseInt(n.innerHTML)&&parseInt(n.innerHTML)<1e3))return!1;n.innerHTML=parseInt(n.innerHTML)+1}if("-"===e.innerHTML){n=e.previousElementSibling;if(!(2<=parseInt(n.innerHTML)&&parseInt(n.innerHTML)<=1e3))return!1;n.innerHTML=n.innerHTML-1}})}function d3(){var o,t,l=null,e=document.querySelector(".main .cz .sp4"),c=document.querySelector(".main .box ul");localStorage.getItem("cc")&&(o=JSON.parse(localStorage.getItem("cc")),t="",o.forEach(function(e,n){t+="<li>\n    <img src=".concat(e.img,' alt="">\n    <h3> ').concat(e.title,' </h3>\n    \n    <span class="sp1">\n      价格: <i> ').concat(e.$my*e.num,'</i> 元\n    </span>\n    <span class="sp2">\n      数量: <i>').concat(e.num,'</i>件\n      <button class="btn1">-</button>\n      <button class="btn2">+</button>\n    </span>\n    <span class="sp3" c="').concat(e.code,'">\n      删除\n    </span>\n    <span class="sp4">\n      购买\n    </span>\n    <input type="checkbox" style="display: none;">\n  </li>')}),c.innerHTML=t),c.addEventListener("click",function(e){var t,e=e.target;"sp3"===e.className&&(c.removeChild(e.parentNode),t=e.getAttribute("c"),o.forEach(function(e,n){e.code==t&&o.splice(n,1)}),0<o.length?localStorage.setItem("cc",JSON.stringify(o)):(localStorage.removeItem("cc"),c.innerHTML="<span>快去选购商品吧!</span>"))}),e.addEventListener("click",function(){(l=document.querySelectorAll(".main .box li")).forEach(function(e,n){l[n].children[5].checked&&(c.removeChild(l[n]),o.forEach(function(t,c){l.forEach(function(e,n){t.code==l[n].children[4].getAttribute("c")&&o.splice(c,1)})}))}),0<o.length?localStorage.setItem("cc",JSON.stringify(o)):(localStorage.removeItem("cc"),c.innerHTML="<span>快去选购商品吧!</span>")})}function d4(){var e=document.querySelector(".main .box ul"),c=(e.children,0),o=0,l=JSON.parse(localStorage.getItem("cc"));console.log(l),e.addEventListener("click",function(e){var t=e.target;"+"===t.innerHTML&&(c=parseInt(t.previousElementSibling.previousElementSibling.innerHTML),o=parseInt(t.parentNode.nextElementSibling.getAttribute("c")),l.forEach(function(e,n){e.code===o&&(l[n].num=c,t.parentNode.previousElementSibling.children[0].innerHTML=parseInt(e.$my)+parseInt(t.parentNode.previousElementSibling.children[0].innerHTML))}),localStorage.setItem("cc",JSON.stringify(l))),"-"===t.innerHTML&&(c=parseInt(t.previousElementSibling.innerHTML),o=parseInt(t.parentNode.nextElementSibling.getAttribute("c")),l.forEach(function(e,n){e.code===o&&(1<(l[n].num=c)&&(t.parentNode.previousElementSibling.children[0].innerHTML=parseInt(t.parentNode.previousElementSibling.children[0].innerHTML)-parseInt(e.$my)),1===c&&(t.parentNode.previousElementSibling.children[0].innerHTML=parseInt(e.$my)))}),localStorage.setItem("cc",JSON.stringify(l)))})}function d5(){var c,e=document.querySelector(".main .cz .sp5"),o=document.querySelector(".main .box .box1"),l=document.querySelector(".main .box .jiage"),n=document.querySelector(".main .box .jiage .dele"),i=document.querySelector(".main .box ul"),r=document.querySelector(".main .box .jiage span i");e.addEventListener("click",function(){o.style.display="block",l.style.display="block";for(var e=0,n=0,t=(c=i.children).length;n<t;n++)c[n].children[6].checked&&(e+=parseInt(c[n].children[2].children[0].innerHTML));0===e&&(o.style.display="none",l.style.display="none"),r.innerHTML=e}),i.addEventListener("click",function(e){e=e.target;"sp4"===e.className&&(o.style.display="block",l.style.display="block",r.innerHTML=e.parentNode.children[2].children[0].innerHTML)}),n.addEventListener("click",function(){o.style.display="none",l.style.display="none"})}a(),a1(),a3(),a4(),a6(),a9(),a10(),d1(),d2(),d3(),d4(),d5();